{{ define "main" }}
<article itemscope itemtype="https://schema.org/CollectionPage">
    <header class="page-header">
        <h1 itemprop="name">{{ .Title }}</h1>
        {{- if .Summary -}}
        <p class="page-description" itemprop="description">{{ .Summary }}</p>
        {{- end -}}
    </header>

    {{ if .Content }}
    <div class="page-content" itemprop="text">
        {{ .Content }}
    </div>
    {{ end }}

    {{ if .Pages }}
    <nav class="page-list" aria-label="Page list">
        <ul>
            {{ range .Pages.ByWeight }}
            {{- if (partial "page-allowed.html" .).allowed -}}
            <li itemscope itemtype="https://schema.org/ListItem">
                <a href="{{ .RelPermalink }}" itemprop="url">
                    <span itemprop="name">{{ .Title }}</span>
                </a>
                {{ if .Summary }}
                <p itemprop="description">{{ .Summary }}</p>
                {{ end }}
            </li>
            {{- end -}}
            {{ end }}
        </ul>
    </nav>
    {{ end }}
</article>
{{ end }}